{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "CMake: Configure (Debug)",
            "type": "shell",
            "command": "cmake",
            "args": [
                "-B",
                "${workspaceFolder}/build-debug",
                "-S",
                "${workspaceFolder}",
                "-DCMAKE_BUILD_TYPE=Debug",
                "-G",
                "Ninja"
            ],
            "group": "build",
            "problemMatcher": [],
            "detail": "Configure project with CMake (Debug)"
        },
        {
            "label": "CMake: Configure (Release)",
            "type": "shell",
            "command": "cmake",
            "args": [
                "-B",
                "${workspaceFolder}/build-release",
                "-S",
                "${workspaceFolder}",
                "-DCMAKE_BUILD_TYPE=Release",
                "-G",
                "Ninja"
            ],
            "group": "build",
            "problemMatcher": [],
            "detail": "Configure project with CMake (Release)"
        },
        {
            "label": "CMake: Build (Debug)",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "${workspaceFolder}/build-debug",
                "--parallel"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "dependsOn": [
                "CMake: Configure (Debug)"
            ],
            "problemMatcher": [
                "$gcc"
            ],
            "detail": "Build project (Debug)"
        },
        {
            "label": "CMake: Build (Release)",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "${workspaceFolder}/build-release",
                "--parallel"
            ],
            "group": "build",
            "dependsOn": [
                "CMake: Configure (Release)"
            ],
            "problemMatcher": [
                "$gcc"
            ],
            "detail": "Build project (Release)"
        },
        {
            "label": "CMake: Clean",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "${workspaceFolder}/build-${input:buildType}",
                "--target",
                "clean"
            ],
            "group": "build",
            "problemMatcher": [],
            "detail": "Clean build artifacts"
        },
        {
            "label": "Test: Run All",
            "type": "shell",
            "command": "ctest",
            "args": [
                "--output-on-failure"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build-${input:buildType}"
            },
            "group": "test",
            "problemMatcher": [],
            "detail": "Run all tests"
        },
        {
            "label": "Test: Run Unit Tests",
            "type": "shell",
            "command": "ctest",
            "args": [
                "-L",
                "unit",
                "--output-on-failure"
            ],
            "options": {
                "cwd": "${workspaceFolder}/build-${input:buildType}"
            },
            "group": "test",
            "problemMatcher": [],
            "detail": "Run unit tests only"
        },
        {
            "label": "Coverage: Generate Report",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "${workspaceFolder}/build-debug",
                "--target",
                "coverage"
            ],
            "group": "test",
            "problemMatcher": [],
            "detail": "Generate code coverage report"
        },
        {
            "label": "Docker: Build Linux",
            "type": "shell",
            "command": "bash",
            "args": [
                "${workspaceFolder}/scripts/docker-build.sh",
                "-p",
                "linux",
                "-t",
                "Release"
            ],
            "group": "build",
            "problemMatcher": [],
            "detail": "Build project in Linux Docker container"
        },
        {
            "label": "Docker: Shell Linux",
            "type": "shell",
            "command": "bash",
            "args": [
                "${workspaceFolder}/scripts/docker-shell.sh",
                "linux"
            ],
            "isBackground": false,
            "problemMatcher": [],
            "detail": "Open interactive shell in Linux Docker container"
        },
        {
            "label": "Clang: Format All",
            "type": "shell",
            "command": "find",
            "args": [
                "src",
                "include",
                "tests",
                "-type",
                "f",
                "(",
                "-name",
                "*.cpp",
                "-o",
                "-name",
                "*.hpp",
                "-o",
                "-name",
                "*.h",
                ")",
                "-exec",
                "clang-format",
                "-i",
                "{}",
                "+"
            ],
            "group": "build",
            "problemMatcher": [],
            "detail": "Format all C++ files with clang-format"
        },
        {
            "label": "Documentation: Generate",
            "type": "shell",
            "command": "cmake",
            "args": [
                "--build",
                "${workspaceFolder}/build-${input:buildType}",
                "--target",
                "doc"
            ],
            "group": "build",
            "problemMatcher": [],
            "detail": "Generate Doxygen documentation"
        }
    ],
    "inputs": [
        {
            "id": "buildType",
            "type": "pickString",
            "description": "Select build type",
            "options": [
                "debug",
                "release",
                "fastdebug",
                "slowrelease"
            ],
            "default": "debug"
        }
    ]
}
